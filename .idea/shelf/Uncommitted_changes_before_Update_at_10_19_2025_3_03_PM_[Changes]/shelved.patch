Index: app/src/main/java/com/example/project_btl/DetailSPActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.project_btl;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.RatingBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\n\r\nimport com.example.project_btl.cart.MainActivity_giohang;\r\nimport com.google.android.material.button.MaterialButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class DetailSPActivity extends AppCompatActivity {\r\n\r\n    private ImageView productImage;\r\n    private TextView productName, productPrice, tvQuantity, moTa, ttBoSung;\r\n    private RatingBar ratingBar;\r\n    private RadioGroup rgSizeGiay, rgSizeClothes;\r\n    private ImageButton btnGiam, btnTang, btnGioHang, btnBack;\r\n    private MaterialButton btnBuyNow;\r\n\r\n    private int quantity = 1; // số lượng mặc định = 1\r\n    private FirebaseFirestore db;\r\n    private String userId;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.detail_sp);\r\n\r\n        if(getSupportActionBar() != null ){\r\n            getSupportActionBar().hide();\r\n        }\r\n\r\n        // Firebase\r\n        db = FirebaseFirestore.getInstance();\r\n        if (FirebaseAuth.getInstance().getCurrentUser() != null) {\r\n            userId = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n        } else {\r\n            userId = \"guest\"; // xử lý guest nếu chưa đăng nhập\r\n        }\r\n\r\n        // Ánh xạ View\r\n        productImage = findViewById(R.id.ProductImages);\r\n        productName = findViewById(R.id.detailProductName);\r\n        productPrice = findViewById(R.id.detailProductPrice);\r\n        ratingBar = findViewById(R.id.productRating);\r\n        tvQuantity = findViewById(R.id.tvDetailQuantity);\r\n        moTa = findViewById(R.id.MoTa);\r\n        ttBoSung = findViewById(R.id.TTBoSung);\r\n        rgSizeGiay = findViewById(R.id.rgSizeGiay);\r\n        rgSizeClothes = findViewById(R.id.rgSizeClothes);\r\n\r\n        btnGiam = findViewById(R.id.btnGiamSoLuong);\r\n        btnTang = findViewById(R.id.btnTangSoLuong);\r\n        btnGioHang = findViewById(R.id.btnGioHang);\r\n        btnBuyNow = findViewById(R.id.btnBuyNow);\r\n        btnBack = findViewById(R.id.btnBack);\r\n        // Lấy object từ Intent\r\n\r\n        ProductModel product = (ProductModel) getIntent().getSerializableExtra(\"product\");\r\n\r\n        if (product != null) {\r\n            productImage.setImageResource(product.getImage());\r\n            productName.setText(product.getName());\r\n            productPrice.setText(product.getPrice() + \"$\");\r\n            ratingBar.setRating(product.getRating());\r\n            moTa.setText(product.getDescription());\r\n            ttBoSung.setText(product.getMoreInfor());\r\n\r\n            quantity = product.getQuantity();\r\n            if (quantity <= 0) quantity = 1;\r\n            tvQuantity.setText(String.valueOf(quantity));\r\n\r\n            // Hiển thị RadioGroup phù hợp loại sản phẩm\r\n            showSizeOptions(product.getType());\r\n        }\r\n\r\n        btnBack.setOnClickListener(v -> finish());\r\n\r\n        btnTang.setOnClickListener(v -> {\r\n            quantity++;\r\n            if (product != null) product.setQuantity(quantity);\r\n            tvQuantity.setText(String.valueOf(quantity));\r\n        });\r\n\r\n        btnGiam.setOnClickListener(v -> {\r\n            if (quantity > 1) {\r\n                quantity--;\r\n                if (product != null) product.setQuantity(quantity);\r\n                tvQuantity.setText(String.valueOf(quantity));\r\n            }\r\n        });\r\n\r\n        // Nút thêm giỏ hàng lên Firebase\r\n        btnGioHang.setOnClickListener(v -> {\r\n            if (product == null) return;\r\n\r\n            String size = getSelectedSize();\r\n            product.setSelectedSize(size);\r\n            product.setQuantity(quantity);\r\n\r\n            // Tạo map để lưu Firestore\r\n            Map<String, Object> cartItem = new HashMap<>();\r\n            cartItem.put(\"name\", product.getName());\r\n            cartItem.put(\"price\", product.getPrice());\r\n            cartItem.put(\"quantity\", product.getQuantity());\r\n            cartItem.put(\"selectedSize\", product.getSelectedSize());\r\n            cartItem.put(\"image\", product.getImage());\r\n            cartItem.put(\"type\", product.getType());\r\n\r\n            // Lưu vào Firestore: collection users -> document userId -> collection cartItems -> document productId\r\n            db.collection(\"users\")\r\n                    .document(userId)\r\n                    .collection(\"cartItems\")\r\n                    .document(product.getId())\r\n                    .set(cartItem)\r\n                    .addOnSuccessListener(aVoid -> {\r\n                        Toast.makeText(this, \"Đã thêm vào giỏ hàng\", Toast.LENGTH_SHORT).show();\r\n                        // Mở giỏ hàng\r\n                        Intent intent = new Intent(DetailSPActivity.this, MainActivity_giohang.class);\r\n                        startActivity(intent);\r\n                    })\r\n                    .addOnFailureListener(e -> {\r\n                        Toast.makeText(this, \"Lỗi khi thêm giỏ hàng\", Toast.LENGTH_SHORT).show();\r\n                        e.printStackTrace();\r\n                    });\r\n        });\r\n\r\n        //Bấm buy now sẽ hiển thị luôn form thanh toán\r\n        btnBuyNow.setOnClickListener(v -> {\r\n            if (product == null) return;\r\n\r\n            String size = getSelectedSize();\r\n            product.setSelectedSize(size);\r\n            product.setQuantity(quantity);\r\n\r\n            // Gửi sản phẩm hiện tại sang CheckOutActivity\r\n            ArrayList<ProductModel> selectedItems = new ArrayList<>();\r\n            selectedItems.add(product);\r\n\r\n            Intent intent = new Intent(DetailSPActivity.this, CheckOutActivity.class);\r\n            intent.putExtra(\"selectedItems\", selectedItems); // Truyền danh sách có 1 sản phẩm\r\n            startActivity(intent);\r\n\r\n            // Hiệu ứng chuyển trang\r\n            overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);\r\n        });\r\n    }\r\n\r\n    private void showSizeOptions(String type) {\r\n        if (type.equals(\"Giày\")) {\r\n            rgSizeGiay.setVisibility(View.VISIBLE);\r\n            rgSizeClothes.setVisibility(View.GONE);\r\n        } else if (type.equals(\"Quần\") || type.equals(\"Áo\")) {\r\n            rgSizeGiay.setVisibility(View.GONE);\r\n            rgSizeClothes.setVisibility(View.VISIBLE);\r\n        } else {\r\n            rgSizeGiay.setVisibility(View.GONE);\r\n            rgSizeClothes.setVisibility(View.GONE);\r\n        }\r\n    }\r\n\r\n    private String getSelectedSize() {\r\n        if (rgSizeGiay.getVisibility() == View.VISIBLE) {\r\n            int selectedId = rgSizeGiay.getCheckedRadioButtonId();\r\n            if (selectedId == -1) return \"Chưa chọn size\";\r\n            RadioButton selectedRadio = findViewById(selectedId);\r\n            return selectedRadio.getText().toString();\r\n        } else if (rgSizeClothes.getVisibility() == View.VISIBLE) {\r\n            int selectedId = rgSizeClothes.getCheckedRadioButtonId();\r\n            if (selectedId == -1) return \"Chưa chọn size\";\r\n            RadioButton selectedRadio = findViewById(selectedId);\r\n            return selectedRadio.getText().toString();\r\n        }\r\n        return \"Chưa chọn size\";\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/project_btl/DetailSPActivity.java b/app/src/main/java/com/example/project_btl/DetailSPActivity.java
--- a/app/src/main/java/com/example/project_btl/DetailSPActivity.java	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ b/app/src/main/java/com/example/project_btl/DetailSPActivity.java	(date 1760577447248)
@@ -14,6 +14,7 @@
 import androidx.appcompat.app.AppCompatActivity;
 
 
+import com.example.project_btl.CheckOut.CheckOutActivity;
 import com.example.project_btl.cart.MainActivity_giohang;
 import com.google.android.material.button.MaterialButton;
 import com.google.firebase.auth.FirebaseAuth;
@@ -22,20 +23,16 @@
 import java.util.ArrayList;
 import java.util.HashMap;
 import java.util.Map;
-
 public class DetailSPActivity extends AppCompatActivity {
-
     private ImageView productImage;
     private TextView productName, productPrice, tvQuantity, moTa, ttBoSung;
     private RatingBar ratingBar;
     private RadioGroup rgSizeGiay, rgSizeClothes;
     private ImageButton btnGiam, btnTang, btnGioHang, btnBack;
     private MaterialButton btnBuyNow;
-
     private int quantity = 1; // số lượng mặc định = 1
     private FirebaseFirestore db;
     private String userId;
-
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\">\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n        android:fullBackupContent=\"@xml/backup_rules\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.Project_btl\">\r\n\r\n\t\t<!-- màn SignIn -->\r\n\t\t<activity android:name=\".Login.SignInactivity\" />\r\n\r\n\t\t<!-- màn Home -->\r\n\t\t<activity android:name=\".home.MainHomeActivity\" />\r\n\r\n<!--\t\t&lt;!&ndash; replaced deprecated SignInactivity with LoginActivity &ndash;&gt;-->\r\n<!--\t\t<activity android:name=\".LoginActivity\" />-->\r\n\r\n\r\n\t\t<!-- ChiTietSP activity (product detail) -->\r\n\t\t<activity android:name=\".DetailSPActivity\" />\r\n\r\n\t\t<!-- Gio hang activity (product detail) -->\r\n\t\t<activity android:name=\".cart.MainActivity_giohang\" />\r\n\r\n\t\t<!-- Form Thanh toán lý Hóa -->\r\n\t\t<activity android:name=\".CheckOutActivity\" />\r\n\r\n\t\t<!-- Form thông báo -->\r\n\t\t<activity android:name=\".notification.NotificationsActivity\" />\r\n\r\n\t\t<!-- Form profile -->\r\n\t\t<activity android:name=\".profile.ProfileActivity\" />\r\n\r\n\t\t<!-- Form profile -->\r\n\t\t<activity android:name=\".profile.ChangePasswordActivity\" />\r\n\r\n\t\t<!-- Form profile -->\r\n\t\t<activity android:name=\".profile.EditProfileActivity\" />\r\n\r\n\t\t<!-- Form orders history -->\r\n\t\t<activity android:name=\".OrderHistoryActivity\" />\r\n\r\n\t\t<!-- màn Splash (màn khởi động app) -->\r\n\t\t<activity\r\n\t\t\tandroid:name=\".Login.SplashActivity\"\r\n\t\t\tandroid:exported=\"true\">\r\n\t\t\t<intent-filter>\r\n\t\t\t\t<action android:name=\"android.intent.action.MAIN\" />\r\n\t\t\t\t<category android:name=\"android.intent.category.LAUNCHER\" />\r\n\t\t\t</intent-filter>\r\n\t\t</activity>\r\n\r\n    </application>\r\n</manifest>\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
--- a/app/src/main/AndroidManifest.xml	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ b/app/src/main/AndroidManifest.xml	(date 1760577233522)
@@ -29,7 +29,7 @@
 		<activity android:name=".cart.MainActivity_giohang" />
 
 		<!-- Form Thanh toán lý Hóa -->
-		<activity android:name=".CheckOutActivity" />
+		<activity android:name=".CheckOut.CheckOutActivity" />
 
 		<!-- Form thông báo -->
 		<activity android:name=".notification.NotificationsActivity" />
@@ -44,7 +44,7 @@
 		<activity android:name=".profile.EditProfileActivity" />
 
 		<!-- Form orders history -->
-		<activity android:name=".OrderHistoryActivity" />
+		<activity android:name=".profile.OrderHistoryActivity" />
 
 		<!-- màn Splash (màn khởi động app) -->
 		<activity
Index: app/src/main/java/com/example/project_btl/profile/ProfileActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.project_btl.profile;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.project_btl.Login.SignInactivity;\r\nimport com.example.project_btl.OrderHistoryActivity;\r\nimport com.example.project_btl.R;\r\nimport com.example.project_btl.cart.MainActivity_giohang;\r\nimport com.example.project_btl.home.MainHomeActivity;\r\nimport com.example.project_btl.notification.NotificationsActivity;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\n\r\npublic class ProfileActivity extends AppCompatActivity {\r\n\r\n    private View rowEditProfile, rowNotification, rowAddress, rowPassword;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_profile);\r\n        if(getSupportActionBar() != null)\r\n            getSupportActionBar().hide();\r\n\r\n\r\n\r\n        BottomNavigationView bottomNavigationView = findViewById(R.id.bottomNavigation);\r\n\r\n        // Đặt mặc định chọn profile\r\n        bottomNavigationView.setSelectedItemId(R.id.nav_profile);\r\n\r\n        bottomNavigationView.setOnItemSelectedListener(item -> {\r\n            int id = item.getItemId();\r\n\r\n            if (id == R.id.nav_home) {\r\n                startActivity(new Intent(this, MainHomeActivity.class));\r\n                overridePendingTransition(0, 0);\r\n                return true;\r\n            } else if (id == R.id.nav_cart) {\r\n                startActivity(new Intent(this, MainActivity_giohang.class));\r\n                overridePendingTransition(0, 0);\r\n                return true;\r\n            } else if (id == R.id.nav_notifications) {\r\n                startActivity(new Intent(this, NotificationsActivity.class));\r\n                overridePendingTransition(0, 0);\r\n                return true;\r\n            } else if (id == R.id.nav_profile) {\r\n                Intent intent = new Intent(this, ProfileActivity.class);\r\n                intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\r\n                startActivity(intent);\r\n                overridePendingTransition(0, 0);\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        });\r\n\r\n        setupRow((View) findViewById(R.id.rowEditProfile),\r\n                R.drawable.ic_bell, \"Edit Profile\");\r\n\r\n        setupRow((View) findViewById(R.id.rowHistory),\r\n                R.drawable.ic_orders_history, \"Order History\");\r\n\r\n        setupRow((View) findViewById(R.id.rowPassword),\r\n                R.drawable.ic_lock, \"Change Password\");\r\n\r\n        findViewById(R.id.rowPassword).setOnClickListener(v ->\r\n                startActivity(new Intent(this, ChangePasswordActivity.class)));\r\n\r\n        // click Edit Profile -> mở màn 2\r\n        findViewById(R.id.rowEditProfile).setOnClickListener(v ->\r\n                startActivity(new Intent(this, EditProfileActivity.class)));\r\n\r\n        // click Order History -> navigate to order history screen\r\n        findViewById(R.id.rowHistory).setOnClickListener(v ->\r\n                startActivity(new Intent(this, OrderHistoryActivity.class)));\r\n\r\n\r\n        findViewById(R.id.btnSignOut).setOnClickListener(v -> {\r\n            // Xóa session hoặc token ở đây nếu có\r\n\r\n            Intent intent = new Intent(ProfileActivity.this, SignInactivity.class);\r\n            // Xóa tất cả activity cũ để không quay lại bằng nút back\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n            startActivity(intent);\r\n            finish();\r\n        });\r\n    }\r\n\r\n    private void setupRow(View row, int iconRes, String title) {\r\n        ImageView iv = row.findViewById(R.id.ivIcon);\r\n        TextView tv = row.findViewById(R.id.tvTitle);\r\n        iv.setImageResource(iconRes);\r\n        tv.setText(title);\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/project_btl/profile/ProfileActivity.java b/app/src/main/java/com/example/project_btl/profile/ProfileActivity.java
--- a/app/src/main/java/com/example/project_btl/profile/ProfileActivity.java	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ b/app/src/main/java/com/example/project_btl/profile/ProfileActivity.java	(date 1760577233488)
@@ -9,7 +9,6 @@
 import androidx.appcompat.app.AppCompatActivity;
 
 import com.example.project_btl.Login.SignInactivity;
-import com.example.project_btl.OrderHistoryActivity;
 import com.example.project_btl.R;
 import com.example.project_btl.cart.MainActivity_giohang;
 import com.example.project_btl.home.MainHomeActivity;
Index: app/src/main/res/layout/homepage_form.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:orientation=\"vertical\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n    <LinearLayout\r\n        android:background=\"@drawable/bg_bottom_line\"\r\n        android:orientation=\"horizontal\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"65dp\">\r\n        <LinearLayout\r\n            android:background=\"@drawable/ic_logo\"\r\n            android:layout_width=\"180dp\"\r\n            android:layout_marginLeft=\"8dp\"\r\n            android:layout_height=\"match_parent\">\r\n\r\n        </LinearLayout>\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"11dp\"\r\n            android:layout_marginLeft=\"70dp\"\r\n            app:srcCompat=\"@drawable/profile\" />\r\n        <TextView\r\n\r\n            android:padding=\"12dp\"\r\n            android:text=\"Xin chào ,\\nHiệp ngu\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\">\r\n\r\n        </TextView>\r\n    </LinearLayout>\r\n\r\n\r\n    <LinearLayout\r\n        android:background=\"@drawable/bg_bottom_line\"\r\n        android:orientation=\"horizontal\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"65dp\">\r\n\r\n        <EditText\r\n            android:id=\"@+id/edtSearch\"\r\n            android:background=\"@drawable/bg_edttext_search\"\r\n            android:layout_marginLeft=\"30dp\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_width=\"300dp\"\r\n            android:layout_height=\"45dp\"\r\n            android:hint=\"Nhập tìm kiếm\"\r\n            android:drawableLeft=\"@drawable/search_icon\"\r\n            android:drawablePadding=\"10dp\"\r\n            android:paddingLeft=\"10dp\">\r\n\r\n        </EditText>\r\n\r\n        <Button\r\n            android:drawableLeft=\"@drawable/settings_icon\"\r\n            android:background=\"#00000000\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\">\r\n\r\n        </Button>\r\n\r\n\r\n    </LinearLayout>\r\n\r\n    <!-- Banner -->\r\n    <androidx.viewpager2.widget.ViewPager2\r\n        android:id=\"@+id/bannerViewPager\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"200dp\" />\r\n\r\n    <!-- Categories -->\r\n    <LinearLayout\r\n        android:orientation=\"horizontal\"\r\n        android:padding=\"12dp\"\r\n        android:gravity=\"center_vertical\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <TextView\r\n            android:text=\"Các danh mục\"\r\n            android:textSize=\"16sp\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\" />\r\n\r\n        <TextView\r\n            android:text=\"View All\"\r\n            android:textColor=\"@android:color/holo_blue_dark\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:gravity=\"end\" />\r\n    </LinearLayout>\r\n\r\n    <!-- RecyclerView cho categories -->\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/categoryRecyclerView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:scrollbars=\"none\"\r\n        android:padding=\"8dp\"/>\r\n\r\n\r\n    <!-- Grid sản phẩm -->\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/productRecyclerView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"0dp\"\r\n        android:layout_weight=\"1\"\r\n        android:padding=\"8dp\"\r\n        app:layoutManager=\"androidx.recyclerview.widget.GridLayoutManager\"\r\n        app:spanCount=\"2\"/>\r\n\r\n\r\n\r\n    <!-- Bottom Navigation -->\r\n    <com.google.android.material.bottomnavigation.BottomNavigationView\r\n        android:id=\"@+id/bottomNavigation\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"@android:color/white\"\r\n        app:itemIconSize=\"26dp\"\r\n        app:itemIconTint=\"@null\"\r\n        app:itemTextColor=\"@null\"\r\n        app:menu=\"@menu/bottom_nav_menu\" />\r\n\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/homepage_form.xml b/app/src/main/res/layout/homepage_form.xml
--- a/app/src/main/res/layout/homepage_form.xml	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ b/app/src/main/res/layout/homepage_form.xml	(date 1760577447266)
@@ -10,12 +10,12 @@
         android:orientation="horizontal"
         android:layout_width="match_parent"
         android:layout_height="65dp">
+
         <LinearLayout
             android:background="@drawable/ic_logo"
             android:layout_width="180dp"
             android:layout_marginLeft="8dp"
             android:layout_height="match_parent">
-
         </LinearLayout>
 
         <ImageView
Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM__Changes_.xml	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ /dev/null	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM_[Changes]" date="1760092986713" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 10/10/2025 5:42 PM [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2025_5_42_PM_[Changes]/shelved.patch	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ /dev/null	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
@@ -1,311 +0,0 @@
-Index: app/src/main/res/layout/formchangepassword.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/bg\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        android:padding=\"10dp\">\r\n\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:gravity=\"center_vertical\">\r\n\r\n            <Button\r\n                android:id=\"@+id/btnBack\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:backgroundTint=\"@color/darkBlue\"\r\n                android:text=\"Quay lại\"\r\n                android:textColor=\"@color/white\" />\r\n            <TextView\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Change Password\"\r\n                android:textStyle=\"bold\"\r\n                android:textSize=\"20sp\"\r\n                android:layout_weight=\"1\"\r\n                android:layout_marginLeft=\"20dp\"/>\r\n        </LinearLayout>\r\n\r\n        <Space android:layout_width=\"match_parent\" android:layout_height=\"12dp\"/>\r\n\r\n        <!-- Form -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Name\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/etName\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Đào Phúc Dân\"/>\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Username\"\r\n            android:layout_marginTop=\"12dp\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/etUsername\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"dandan\"/>\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Email\"\r\n            android:layout_marginTop=\"12dp\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/etEmail\"\r\n                android:inputType=\"textEmailAddress\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"dan@email.com\"/>\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Password old\"\r\n            android:layout_marginTop=\"12dp\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/etPassOld\"\r\n                android:inputType=\"textEmailAddress\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"dandan\"/>\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Password new\"\r\n            android:layout_marginTop=\"12dp\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/etPassNew\"\r\n                android:inputType=\"textEmailAddress\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"dandz123\"/>\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <Button\r\n            android:id=\"@+id/btnSave\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"52dp\"\r\n            android:text=\"Thay đổi\"\r\n            android:textStyle=\"bold\"\r\n            android:textSize=\"17sp\"\r\n            android:textAllCaps=\"false\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:background=\"@drawable/bg_primary_btn\"\r\n            android:textColor=\"@android:color/white\"/>\r\n    </LinearLayout>\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/formchangepassword.xml b/app/src/main/res/layout/formchangepassword.xml
---- a/app/src/main/res/layout/formchangepassword.xml	(revision 38889621e503b5a0314a681a1e9c0e0910739e6f)
-+++ b/app/src/main/res/layout/formchangepassword.xml	(date 1760030597747)
-@@ -36,74 +36,49 @@
-         <Space android:layout_width="match_parent" android:layout_height="12dp"/>
- 
-         <!-- Form -->
-+
-+
-         <com.google.android.material.textfield.TextInputLayout
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Name">
--
--            <com.google.android.material.textfield.TextInputEditText
--                android:id="@+id/etName"
--                android:layout_width="match_parent"
--                android:layout_height="wrap_content"
--                android:text="Đào Phúc Dân"/>
--        </com.google.android.material.textfield.TextInputLayout>
--
--        <com.google.android.material.textfield.TextInputLayout
--            android:layout_width="match_parent"
--            android:layout_height="wrap_content"
--            android:hint="Username"
-+            android:hint="Password old"
-             android:layout_marginTop="12dp">
- 
-             <com.google.android.material.textfield.TextInputEditText
--                android:id="@+id/etUsername"
--                android:layout_width="match_parent"
--                android:layout_height="wrap_content"
--                android:text="dandan"/>
--        </com.google.android.material.textfield.TextInputLayout>
--
--
--        <com.google.android.material.textfield.TextInputLayout
--            android:layout_width="match_parent"
--            android:layout_height="wrap_content"
--            android:hint="Email"
--            android:layout_marginTop="12dp">
--
--            <com.google.android.material.textfield.TextInputEditText
--                android:id="@+id/etEmail"
-+                android:id="@+id/etPassOld"
-                 android:inputType="textEmailAddress"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:text="dan@email.com"/>
-+                android:text="Điền mật khẩu cũ"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
- 
-         <com.google.android.material.textfield.TextInputLayout
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Password old"
-+            android:hint="Password new"
-             android:layout_marginTop="12dp">
- 
-             <com.google.android.material.textfield.TextInputEditText
--                android:id="@+id/etPassOld"
-+                android:id="@+id/etPassNew"
-                 android:inputType="textEmailAddress"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:text="dandan"/>
-+                android:text="Điền mật khẩu mới"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
--
-         <com.google.android.material.textfield.TextInputLayout
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Password new"
-+            android:hint="Password new again"
-             android:layout_marginTop="12dp">
- 
-             <com.google.android.material.textfield.TextInputEditText
--                android:id="@+id/etPassNew"
-+                android:id="@+id/etPassNewAgain"
-                 android:inputType="textEmailAddress"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:text="dandz123"/>
-+                android:text="Điền lại mật khẩu mới"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
-         <Button
-Index: app/src/main/java/com/example/project_btl/profile/ProfileActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.project_btl.profile;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.project_btl.Login.SignInactivity;\r\nimport com.example.project_btl.R;\r\nimport com.example.project_btl.cart.MainActivity_giohang;\r\nimport com.example.project_btl.home.MainHomeActivity;\r\nimport com.example.project_btl.notification.NotificationsActivity;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\n\r\npublic class ProfileActivity extends AppCompatActivity {\r\n\r\n    private View rowEditProfile, rowNotification, rowAddress, rowPassword;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_profile);\r\n        if(getSupportActionBar() != null)\r\n            getSupportActionBar().hide();\r\n\r\n\r\n\r\n        BottomNavigationView bottomNavigationView = findViewById(R.id.bottomNavigation);\r\n\r\n        // Đặt mặc định chọn profile\r\n        bottomNavigationView.setSelectedItemId(R.id.nav_profile);\r\n\r\n        bottomNavigationView.setOnItemSelectedListener(item -> {\r\n            int id = item.getItemId();\r\n\r\n            if (id == R.id.nav_home) {\r\n                startActivity(new Intent(this, MainHomeActivity.class));\r\n                overridePendingTransition(0, 0);\r\n                return true;\r\n            } else if (id == R.id.nav_cart) {\r\n                startActivity(new Intent(this, MainActivity_giohang.class));\r\n                overridePendingTransition(0, 0);\r\n                return true;\r\n            } else if (id == R.id.nav_notifications) {\r\n                startActivity(new Intent(this, NotificationsActivity.class));\r\n                overridePendingTransition(0, 0);\r\n                return true;\r\n            } else if (id == R.id.nav_profile) {\r\n                Intent intent = new Intent(this, ProfileActivity.class);\r\n                intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\r\n                startActivity(intent);\r\n                overridePendingTransition(0, 0);\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        });\r\n\r\n        setupRow((View) findViewById(R.id.rowEditProfile),\r\n                R.drawable.ic_bell, \"Edit Profile\");\r\n\r\n        setupRow((View) findViewById(R.id.rowHistory),\r\n                R.drawable.ic_bell, \"Order History\");\r\n\r\n        setupRow((View) findViewById(R.id.rowPassword),\r\n                R.drawable.ic_lock, \"Change Password\");\r\n\r\n        // click Edit Profile -> mở màn 2\r\n        findViewById(R.id.rowEditProfile).setOnClickListener(v ->\r\n                startActivity(new Intent(this, EditProfileActivity.class)));\r\n\r\n        findViewById(R.id.btnSignOut).setOnClickListener(v -> {\r\n            // Xóa session hoặc token ở đây nếu có\r\n\r\n            Intent intent = new Intent(ProfileActivity.this, SignInactivity.class);\r\n            // Xóa tất cả activity cũ để không quay lại bằng nút back\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n            startActivity(intent);\r\n            finish();\r\n        });\r\n    }\r\n\r\n    private void setupRow(View row, int iconRes, String title) {\r\n        ImageView iv = row.findViewById(R.id.ivIcon);\r\n        TextView tv = row.findViewById(R.id.tvTitle);\r\n        iv.setImageResource(iconRes);\r\n        tv.setText(title);\r\n    }\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/project_btl/profile/ProfileActivity.java b/app/src/main/java/com/example/project_btl/profile/ProfileActivity.java
---- a/app/src/main/java/com/example/project_btl/profile/ProfileActivity.java	(revision 38889621e503b5a0314a681a1e9c0e0910739e6f)
-+++ b/app/src/main/java/com/example/project_btl/profile/ProfileActivity.java	(date 1760031000141)
-@@ -68,6 +68,9 @@
-         setupRow((View) findViewById(R.id.rowPassword),
-                 R.drawable.ic_lock, "Change Password");
- 
-+        findViewById(R.id.rowPassword).setOnClickListener(v ->
-+                startActivity(new Intent(this, ChangePasswordActivity.class)));
-+
-         // click Edit Profile -> mở màn 2
-         findViewById(R.id.rowEditProfile).setOnClickListener(v ->
-                 startActivity(new Intent(this, EditProfileActivity.class)));
-Index: app/build.gradle.kts
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    id(\"com.google.gms.google-services\")\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.example.project_btl\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.example.project_btl\"\r\n        minSdk = 28\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation(libs.appcompat)\r\n    implementation(libs.material)\r\n    implementation(libs.activity)\r\n    implementation(libs.constraintlayout)\r\n\r\n    // Firebase BoM (Bill of Materials)\r\n    implementation(platform(\"com.google.firebase:firebase-bom:33.2.0\"))\r\n\r\n// Firebase Firestore (Database)\r\n    implementation(\"com.google.firebase:firebase-firestore\")\r\n\r\n// Firebase Authentication (Đăng nhập)\r\n    implementation(\"com.google.firebase:firebase-auth\")\r\n\r\n// Firebase Storage (Lưu ảnh, video, file)\r\n    implementation(\"com.google.firebase:firebase-storage\")\r\n\r\n\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.ext.junit)\r\n    androidTestImplementation(libs.espresso.core)\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/build.gradle.kts b/app/build.gradle.kts
---- a/app/build.gradle.kts	(revision 38889621e503b5a0314a681a1e9c0e0910739e6f)
-+++ b/app/build.gradle.kts	(date 1760091912586)
-@@ -55,4 +55,4 @@
-     testImplementation(libs.junit)
-     androidTestImplementation(libs.ext.junit)
-     androidTestImplementation(libs.espresso.core)
--}
-+}
-\ No newline at end of file
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\">\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n        android:fullBackupContent=\"@xml/backup_rules\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.Project_btl\">\r\n\r\n\t\t<!-- màn SignIn -->\r\n\t\t<activity android:name=\".Login.SignInactivity\" />\r\n\r\n\t\t<!-- màn Home -->\r\n\t\t<activity android:name=\".home.MainHomeActivity\" />\r\n\r\n<!--\t\t&lt;!&ndash; replaced deprecated SignInactivity with LoginActivity &ndash;&gt;-->\r\n<!--\t\t<activity android:name=\".LoginActivity\" />-->\r\n\r\n\r\n\t\t<!-- ChiTietSP activity (product detail) -->\r\n\t\t<activity android:name=\".ChiTietSPActivity\" />\r\n\r\n\t\t<!-- Gio hang activity (product detail) -->\r\n\t\t<activity android:name=\".cart.MainActivity_giohang\" />\r\n\r\n\r\n\t\t<!-- Form thông báo -->\r\n\t\t<activity android:name=\".notification.NotificationsActivity\" />\r\n\r\n\t\t<!-- Form profile -->\r\n\t\t<activity android:name=\".profile.ProfileActivity\" />\r\n\r\n\t\t<!-- Form profile -->\r\n\t\t<activity android:name=\".profile.EditProfileActivity\" />\r\n\r\n\t\t<!-- màn Splash (màn khởi động app) -->\r\n\t\t<activity\r\n\t\t\tandroid:name=\".Login.SplashActivity\"\r\n\t\t\tandroid:exported=\"true\">\r\n\t\t\t<intent-filter>\r\n\t\t\t\t<action android:name=\"android.intent.action.MAIN\" />\r\n\t\t\t\t<category android:name=\"android.intent.category.LAUNCHER\" />\r\n\t\t\t</intent-filter>\r\n\t\t</activity>\r\n\r\n    </application>\r\n</manifest>\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
---- a/app/src/main/AndroidManifest.xml	(revision 38889621e503b5a0314a681a1e9c0e0910739e6f)
-+++ b/app/src/main/AndroidManifest.xml	(date 1760030743996)
-@@ -35,6 +35,9 @@
- 		<!-- Form profile -->
- 		<activity android:name=".profile.ProfileActivity" />
- 
-+		<!-- Form profile -->
-+		<activity android:name=".profile.ChangePasswordActivity" />
-+
- 		<!-- Form profile -->
- 		<activity android:name=".profile.EditProfileActivity" />
- 
-Index: app/google-services.json
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>{\r\n  \"project_info\": {\r\n    \"project_number\": \"346514177431\",\r\n    \"firebase_url\": \"https://roject-btl-default-rtdb.firebaseio.com\",\r\n    \"project_id\": \"roject-btl\",\r\n    \"storage_bucket\": \"roject-btl.firebasestorage.app\"\r\n  },\r\n  \"client\": [\r\n    {\r\n      \"client_info\": {\r\n        \"mobilesdk_app_id\": \"1:346514177431:android:a15cfc2c801d6df126d8d2\",\r\n        \"android_client_info\": {\r\n          \"package_name\": \"com.example.project_btl\"\r\n        }\r\n      },\r\n      \"oauth_client\": [\r\n        {\r\n          \"client_id\": \"346514177431-js14fr0e24bnegj346vmc4hdabuesf6f.apps.googleusercontent.com\",\r\n          \"client_type\": 1,\r\n          \"android_info\": {\r\n            \"package_name\": \"com.example.project_btl\",\r\n            \"certificate_hash\": \"12b78b120d056446c247f955bb7d3da891f0143d\"\r\n          }\r\n        },\r\n        {\r\n          \"client_id\": \"346514177431-ks4jcvptsr6p9n8sdcs3kjcvo2jtnpam.apps.googleusercontent.com\",\r\n          \"client_type\": 3\r\n        }\r\n      ],\r\n      \"api_key\": [\r\n        {\r\n          \"current_key\": \"AIzaSyA6tZAWS6Xab0FGHFwvSy6aHDsK6CvWTG4\"\r\n        }\r\n      ],\r\n      \"services\": {\r\n        \"appinvite_service\": {\r\n          \"other_platform_oauth_client\": [\r\n            {\r\n              \"client_id\": \"346514177431-ks4jcvptsr6p9n8sdcs3kjcvo2jtnpam.apps.googleusercontent.com\",\r\n              \"client_type\": 3\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  ],\r\n  \"configuration_version\": \"1\"\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/google-services.json b/app/google-services.json
---- a/app/google-services.json	(revision 38889621e503b5a0314a681a1e9c0e0910739e6f)
-+++ b/app/google-services.json	(date 1760092242957)
-@@ -15,6 +15,14 @@
-       },
-       "oauth_client": [
-         {
-+          "client_id": "346514177431-i91asls2pq0e1la9m1vfc9qmfo3nco8r.apps.googleusercontent.com",
-+          "client_type": 1,
-+          "android_info": {
-+            "package_name": "com.example.project_btl",
-+            "certificate_hash": "e23a65705ced13bd1c435ed273a016904454f391"
-+          }
-+        },
-+        {
-           "client_id": "346514177431-js14fr0e24bnegj346vmc4hdabuesf6f.apps.googleusercontent.com",
-           "client_type": 1,
-           "android_info": {
-@@ -45,4 +53,7 @@
-     }
-   ],
-   "configuration_version": "1"
--}
-\ No newline at end of file
-+}
-+
-+
-+
-Index: gradle/libs.versions.toml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>[versions]\r\nagp = \"8.12.1\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nappcompat = \"1.7.1\"\r\nmaterial = \"1.13.0\"\r\nactivity = \"1.11.0\"\r\nconstraintlayout = \"2.2.1\"\r\n\r\n[libraries]\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\next-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nespresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nappcompat = { group = \"androidx.appcompat\", name = \"appcompat\", version.ref = \"appcompat\" }\r\nmaterial = { group = \"com.google.android.material\", name = \"material\", version.ref = \"material\" }\r\nactivity = { group = \"androidx.activity\", name = \"activity\", version.ref = \"activity\" }\r\nconstraintlayout = { group = \"androidx.constraintlayout\", name = \"constraintlayout\", version.ref = \"constraintlayout\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nandroid-library = { id = \"com.android.library\", version.ref = \"agp\" }\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
---- a/gradle/libs.versions.toml	(revision 38889621e503b5a0314a681a1e9c0e0910739e6f)
-+++ b/gradle/libs.versions.toml	(date 1760084781069)
-@@ -7,6 +7,8 @@
- material = "1.13.0"
- activity = "1.11.0"
- constraintlayout = "2.2.1"
-+firebaseAppcheckDebug = "19.0.1"
-+firebaseAppcheckPlayintegrity = "19.0.1"
- 
- [libraries]
- junit = { group = "junit", name = "junit", version.ref = "junit" }
-@@ -16,6 +18,8 @@
- material = { group = "com.google.android.material", name = "material", version.ref = "material" }
- activity = { group = "androidx.activity", name = "activity", version.ref = "activity" }
- constraintlayout = { group = "androidx.constraintlayout", name = "constraintlayout", version.ref = "constraintlayout" }
-+firebase-appcheck-debug = { group = "com.google.firebase", name = "firebase-appcheck-debug", version.ref = "firebaseAppcheckDebug" }
-+firebase-appcheck-playintegrity = { group = "com.google.firebase", name = "firebase-appcheck-playintegrity", version.ref = "firebaseAppcheckPlayintegrity" }
- 
- [plugins]
- android-application = { id = "com.android.application", version.ref = "agp" }
-Index: app/src/main/java/com/example/project_btl/profile/ChangePasswordActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/project_btl/profile/ChangePasswordActivity.java b/app/src/main/java/com/example/project_btl/profile/ChangePasswordActivity.java
-new file mode 100644
---- /dev/null	(date 1760030709786)
-+++ b/app/src/main/java/com/example/project_btl/profile/ChangePasswordActivity.java	(date 1760030709786)
-@@ -0,0 +1,84 @@
-+package com.example.project_btl.profile;
-+
-+import android.os.Bundle;
-+import android.text.TextUtils;
-+import android.widget.Toast;
-+
-+import androidx.appcompat.app.AppCompatActivity;
-+
-+import com.example.project_btl.R;
-+import com.google.android.material.textfield.TextInputEditText;
-+import com.google.firebase.auth.AuthCredential;
-+import com.google.firebase.auth.EmailAuthProvider;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.auth.FirebaseUser;
-+
-+import java.util.Objects;
-+
-+public class ChangePasswordActivity extends AppCompatActivity {
-+
-+    private TextInputEditText etPassOld, etPassNew, etPassNewAgain;
-+    private FirebaseAuth auth;
-+    private FirebaseUser currentUser;
-+
-+    @Override
-+    protected void onCreate(Bundle savedInstanceState) {
-+        super.onCreate(savedInstanceState);
-+        setContentView(R.layout.formchangepassword);
-+
-+        if (getSupportActionBar() != null)
-+            getSupportActionBar().hide();
-+        etPassOld = findViewById(R.id.etPassOld);
-+        etPassNew = findViewById(R.id.etPassNew);
-+        etPassNewAgain = findViewById(R.id.etPassNewAgain);
-+
-+        auth = FirebaseAuth.getInstance();
-+        currentUser = auth.getCurrentUser();
-+
-+        findViewById(R.id.btnBack).setOnClickListener(v -> onBackPressed());
-+        findViewById(R.id.btnSave).setOnClickListener(v -> changePassword());
-+    }
-+    //Chỗ này là đổi mật khẩu
-+    private void changePassword() {
-+        String oldPass = Objects.requireNonNull(etPassOld.getText()).toString().trim();
-+        String newPass = Objects.requireNonNull(etPassNew.getText()).toString().trim();
-+        String confirmPass = Objects.requireNonNull(etPassNewAgain.getText()).toString().trim();
-+
-+        // Kiểm tra dữ liệu mấy gà nhâpj vào có hợp lệ không
-+        if (TextUtils.isEmpty(oldPass) || TextUtils.isEmpty(newPass) || TextUtils.isEmpty(confirmPass)) {
-+            Toast.makeText(this, "Vui lòng nhập đầy đủ thông tin", Toast.LENGTH_SHORT).show();
-+            return;
-+        }
-+
-+        if (!newPass.equals(confirmPass)) {
-+            Toast.makeText(this, "Mật khẩu mới không khớp", Toast.LENGTH_SHORT).show();
-+            return;
-+        }
-+
-+        if (newPass.length() < 6) {
-+            Toast.makeText(this, "Mật khẩu mới phải ít nhất 6 ký tự", Toast.LENGTH_SHORT).show();
-+            return;
-+        }
-+
-+        if (currentUser == null || currentUser.getEmail() == null) {
-+            Toast.makeText(this, "Không tìm thấy người dùng đang đăng nhập", Toast.LENGTH_SHORT).show();
-+            return;
-+        }
-+
-+        AuthCredential credential = EmailAuthProvider.getCredential(currentUser.getEmail(), oldPass);
-+
-+        currentUser.reauthenticate(credential)
-+                .addOnSuccessListener(aVoid -> {
-+                    //  Đẩy mật khẩu mới lên
-+                    currentUser.updatePassword(newPass)
-+                            .addOnSuccessListener(unused -> {
-+                                Toast.makeText(this, "Thay đổi mật khẩu thành công!", Toast.LENGTH_SHORT).show();
-+                                finish();
-+                            })
-+                            .addOnFailureListener(e ->
-+                                    Toast.makeText(this, "Lỗi khi đổi mật khẩu: " + e.getMessage(), Toast.LENGTH_LONG).show());
-+                })
-+                .addOnFailureListener(e ->
-+                        Toast.makeText(this, "Mật khẩu cũ không chính xác", Toast.LENGTH_SHORT).show());
-+    }
-+}
-\ No newline at end of file
Index: app/src/main/java/com/example/project_btl/CreateDatabase.java
===================================================================
diff --git a/app/src/main/java/com/example/project_btl/CreateDatabase.java b/app/src/main/java/com/example/project_btl/CreateDatabase.java
deleted file mode 100644
--- a/app/src/main/java/com/example/project_btl/CreateDatabase.java	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ /dev/null	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
@@ -1,102 +0,0 @@
-package com.example.project_btl;
-
-import android.content.ContentValues;
-import android.content.Context;
-import android.database.Cursor;
-import android.database.sqlite.SQLiteDatabase;
-import android.database.sqlite.SQLiteOpenHelper;
-
-public class CreateDatabase extends SQLiteOpenHelper {
-
-    // Tên CSDL và version
-    public static final String DATABASE_NAME = "UserDB";
-    public static final int DATABASE_VERSION = 1;
-
-    // Tên bảng và cột
-    public static final String TB_USER = "User";
-
-    public static final String COL_ID = "id";
-    public static final String COL_USERNAME = "username";
-    public static final String COL_PASSWORD = "password";
-    public static final String COL_FULLNAME = "fullname";
-    public static final String COL_EMAIL = "email";
-
-    public CreateDatabase(Context context) {
-        super(context, DATABASE_NAME, null, DATABASE_VERSION);
-    }
-
-    @Override
-    public void onCreate(SQLiteDatabase db) {
-        // tạo bảng
-        String createUserTable = "CREATE TABLE " + TB_USER + " (" +
-                COL_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
-                COL_USERNAME + " TEXT UNIQUE, " +
-                COL_PASSWORD + " TEXT, " +
-                COL_FULLNAME + " TEXT, " +
-                COL_EMAIL + " TEXT)";
-        db.execSQL(createUserTable);
-    }
-    // Thêm
-    public boolean insertUser(String username, String password, String fullname, String email) {
-        SQLiteDatabase db = this.getWritableDatabase();
-
-        // Kiểm tra username đã tồn tại chưa
-        String checkQuery = "SELECT * FROM " + TB_USER + " WHERE " + COL_USERNAME + "=?";
-        Cursor cursor = db.rawQuery(checkQuery, new String[]{username});
-        if (cursor.getCount() > 0) {
-            cursor.close();
-            return false;
-        }
-        cursor.close();
-
-        ContentValues values = new ContentValues();
-        values.put(COL_USERNAME, username);
-        values.put(COL_PASSWORD, password);
-        values.put(COL_FULLNAME, fullname);
-        values.put(COL_EMAIL, email);
-
-        long result = db.insert(TB_USER, null, values);
-        return result != -1;
-    }
-    //check
-    public boolean checkUser(String username, String password) {
-        SQLiteDatabase db = this.getReadableDatabase();
-        String query = "SELECT * FROM " + TB_USER +
-                " WHERE " + COL_USERNAME + "=? AND " + COL_PASSWORD + "=?";
-        Cursor cursor = db.rawQuery(query, new String[]{username, password});
-
-        boolean exists = cursor.getCount() > 0;
-        cursor.close();
-        return exists;
-    }
-    //up
-    @Override
-    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
-        db.execSQL("DROP TABLE IF EXISTS " + TB_USER);
-        onCreate(db);
-    }
-
-    //<Lấy pass user
-    public String getPassword(String username, String fullname, String email) {
-        SQLiteDatabase db = this.getReadableDatabase();
-        String pass = null;
-        Cursor cursor = null;
-        try {
-            cursor = db.rawQuery(
-                    "SELECT " + COL_PASSWORD + " FROM " + TB_USER +
-                            " WHERE " + COL_USERNAME + "=? AND " + COL_FULLNAME + "=? AND " + COL_EMAIL + "=?",
-                    new String[]{username.trim(), fullname.trim(), email.trim()}
-            );
-
-            if (cursor != null && cursor.moveToFirst()) {
-                pass = cursor.getString(0);
-            }
-        } catch (Exception e) {
-            e.printStackTrace();
-        } finally {
-            if (cursor != null) cursor.close();
-            db.close();
-        }
-        return pass;
-    }
-}
\ No newline at end of file
Index: app/src/main/java/com/example/project_btl/OrderHistoryAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/project_btl/OrderHistoryAdapter.java b/app/src/main/java/com/example/project_btl/profile/OrderHistoryAdapter.java
rename from app/src/main/java/com/example/project_btl/OrderHistoryAdapter.java
rename to app/src/main/java/com/example/project_btl/profile/OrderHistoryAdapter.java
--- a/app/src/main/java/com/example/project_btl/OrderHistoryAdapter.java	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ b/app/src/main/java/com/example/project_btl/profile/OrderHistoryAdapter.java	(date 1760577233537)
@@ -1,4 +1,4 @@
-package com.example.project_btl;
+package com.example.project_btl.profile;
 
 import android.view.LayoutInflater;
 import android.view.View;
@@ -7,6 +7,11 @@
 import androidx.annotation.NonNull;
 import androidx.recyclerview.widget.LinearLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
+
+import com.example.project_btl.OrderItemAdapter;
+import com.example.project_btl.OrderManagerFirebase;
+import com.example.project_btl.R;
+
 import java.util.List;
 import java.util.Locale;
 import java.text.NumberFormat;
Index: app/src/main/java/com/example/project_btl/OrderHistoryActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/project_btl/OrderHistoryActivity.java b/app/src/main/java/com/example/project_btl/profile/OrderHistoryActivity.java
rename from app/src/main/java/com/example/project_btl/OrderHistoryActivity.java
rename to app/src/main/java/com/example/project_btl/profile/OrderHistoryActivity.java
--- a/app/src/main/java/com/example/project_btl/OrderHistoryActivity.java	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ b/app/src/main/java/com/example/project_btl/profile/OrderHistoryActivity.java	(date 1760577233458)
@@ -1,4 +1,4 @@
-package com.example.project_btl;
+package com.example.project_btl.profile;
 
 import android.os.Bundle;
 import android.view.View;
@@ -7,6 +7,10 @@
 import androidx.appcompat.app.AppCompatActivity;
 import androidx.recyclerview.widget.LinearLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
+
+import com.example.project_btl.OrderManagerFirebase;
+import com.example.project_btl.R;
+
 import java.util.ArrayList;
 import java.util.List;
 
Index: app/src/main/java/com/example/project_btl/cart/MainActivity_giohang.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.project_btl.cart;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.project_btl.ProductModel;\r\nimport com.example.project_btl.R;\r\nimport com.example.project_btl.Login.SignInactivity;\r\nimport com.example.project_btl.home.MainHomeActivity;\r\nimport com.example.project_btl.notification.NotificationsActivity;\r\nimport com.example.project_btl.CheckOutActivity;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.text.NumberFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class MainActivity_giohang extends AppCompatActivity {\r\n\r\n    private RecyclerView recyclerView;\r\n    private CheckBox checkboxSelectAll;\r\n    private Button btnDeleteSelected, btnBuySelected, btnApplyCoupon;\r\n    private EditText edtCoupon;\r\n    private TextView tvSubtotal, tvDiscount, tvTotal;\r\n\r\n    private List<ProductModel> items = new ArrayList<>();\r\n    private Giohang_Adapter adapter;\r\n\r\n    private FirebaseFirestore db;\r\n    private String userId;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_giohang);\r\n        if (getSupportActionBar() != null) getSupportActionBar().hide();\r\n\r\n        // Ánh xạ view\r\n        recyclerView = findViewById(R.id.recyclerViewProducts);\r\n        checkboxSelectAll = findViewById(R.id.checkboxSelectAll);\r\n        btnDeleteSelected = findViewById(R.id.btnDeleteSelected);\r\n        btnBuySelected = findViewById(R.id.btnBuySelected);\r\n        btnApplyCoupon = findViewById(R.id.btnApplyCoupon);\r\n        edtCoupon = findViewById(R.id.edtCoupon);\r\n        tvSubtotal = findViewById(R.id.tvSubtotal);\r\n        tvDiscount = findViewById(R.id.tvDiscount);\r\n        tvTotal = findViewById(R.id.tvTotal);\r\n\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        // Firebase\r\n        db = FirebaseFirestore.getInstance();\r\n        if (FirebaseAuth.getInstance().getCurrentUser() != null)\r\n            userId = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n        else userId = \"guest\";\r\n\r\n        // Adapter\r\n        adapter = new Giohang_Adapter(items, new Giohang_Adapter.Listener() {\r\n            @Override\r\n            public void onItemsChanged() {\r\n                recalcTotal();\r\n            }\r\n\r\n            @Override\r\n            public void onItemRemoved(int position) {\r\n                ProductModel removed = items.get(position);\r\n                db.collection(\"users\").document(userId)\r\n                        .collection(\"cartItems\")\r\n                        .document(removed.getId())\r\n                        .delete();\r\n            }\r\n        });\r\n        recyclerView.setAdapter(adapter);\r\n\r\n        // Load giỏ hàng realtime\r\n        loadCartFromFirebase();\r\n\r\n        // Chọn tất cả\r\n        checkboxSelectAll.setOnCheckedChangeListener((buttonView, isChecked) -> {\r\n            for (ProductModel it : items) it.setChecked(isChecked);\r\n            adapter.notifyDataSetChanged();\r\n            recalcTotal();\r\n        });\r\n\r\n        // Xóa sản phẩm được chọn\r\n        btnDeleteSelected.setOnClickListener(v -> {\r\n            for (ProductModel p : new ArrayList<>(items)) {\r\n                if (p.isChecked()) {\r\n                    db.collection(\"users\").document(userId)\r\n                            .collection(\"cartItems\")\r\n                            .document(p.getId())\r\n                            .delete();\r\n                }\r\n            }\r\n            adapter.notifyDataSetChanged();\r\n            recalcTotal();\r\n        });\r\n\r\n        // Mua hàng → sang form Thanh Toán\r\n        btnBuySelected.setOnClickListener(v -> proceedToCheckout());\r\n\r\n        // Áp dụng voucher\r\n        btnApplyCoupon.setOnClickListener(v -> recalcTotal());\r\n\r\n        // Bottom Navigation\r\n        BottomNavigationView bottomNavigationView = findViewById(R.id.bottomNavigation);\r\n        bottomNavigationView.setSelectedItemId(R.id.nav_cart);\r\n        bottomNavigationView.setOnItemSelectedListener(item -> {\r\n            int id = item.getItemId();\r\n            if (id == R.id.nav_home) startActivity(new Intent(this, MainHomeActivity.class));\r\n            else if (id == R.id.nav_notifications)\r\n                startActivity(new Intent(this, NotificationsActivity.class));\r\n            else if (id == R.id.nav_profile)\r\n                startActivity(new Intent(this, SignInactivity.class));\r\n            overridePendingTransition(0, 0);\r\n            return true;\r\n        });\r\n    }\r\n\r\n    // Hàm tải giỏ hàng từ Firebase\r\n    private void loadCartFromFirebase() {\r\n        db.collection(\"users\").document(userId)\r\n                .collection(\"cartItems\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                        if (error != null) return;\r\n                        items.clear();\r\n                        if (value != null) {\r\n                            for (DocumentSnapshot doc : value.getDocuments()) {\r\n                                ProductModel p = new ProductModel(\r\n                                        doc.getId(),\r\n                                        doc.getString(\"name\"),\r\n                                        doc.getLong(\"price\"),\r\n                                        doc.getLong(\"image\").intValue(),\r\n                                        0f,\r\n                                        \"\", \"\",\r\n                                        doc.getLong(\"quantity\").intValue(),\r\n                                        doc.getString(\"selectedSize\"),\r\n                                        doc.getString(\"type\")\r\n                                );\r\n                                items.add(p);\r\n                            }\r\n                        }\r\n                        adapter.notifyDataSetChanged();\r\n                        recalcTotal();\r\n                    }\r\n                });\r\n    }\r\n\r\n    // Hàm tính tổng tiền\r\n    private void recalcTotal() {\r\n        long subtotal = 0;\r\n        for (ProductModel it : items)\r\n            if (it.isChecked()) subtotal += it.getPrice() * it.getQuantity();\r\n\r\n        long discount = 0;\r\n        String code = edtCoupon.getText() == null ? \"\" : edtCoupon.getText().toString().trim();\r\n        if (!TextUtils.isEmpty(code)) {\r\n            if (\"GIAM10%\".equalsIgnoreCase(code)) discount = Math.round(subtotal * 0.10);\r\n            else if (\"GIAM50$\".equalsIgnoreCase(code)) discount = Math.min(50, subtotal);\r\n        }\r\n        long total = Math.max(0, subtotal - discount);\r\n        tvSubtotal.setText(\"Tổng tiền hàng: \" + formatVnd(subtotal));\r\n        tvDiscount.setText(\"Áp dụng Voucher: \" + formatVnd(discount));\r\n        tvTotal.setText(\"Tổng Thanh Toán: \" + formatVnd(total));\r\n    }\r\n\r\n    private String formatVnd(long v) {\r\n        return NumberFormat.getInstance(new Locale(\"vi\", \"VN\")).format(v) + \"₫\";\r\n    }\r\n\r\n    // Chuyển sang form Thanh Toán\r\n    private void proceedToCheckout() {\r\n        List<ProductModel> selectedItems = new ArrayList<>();\r\n        for (ProductModel p : items) {\r\n            if (p.isChecked()) {\r\n                selectedItems.add(p);\r\n            }\r\n        }\r\n\r\n        if (selectedItems.isEmpty()) {\r\n            Toast.makeText(this, \"Vui lòng chọn sản phẩm để thanh toán\", Toast.LENGTH_SHORT).show();\r\n            return;\r\n        }\r\n\r\n        Intent intent = new Intent(this, CheckOutActivity.class);\r\n        intent.putExtra(\"selectedItems\", (ArrayList<ProductModel>) selectedItems);\r\n        startActivity(intent);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/project_btl/cart/MainActivity_giohang.java b/app/src/main/java/com/example/project_btl/cart/MainActivity_giohang.java
--- a/app/src/main/java/com/example/project_btl/cart/MainActivity_giohang.java	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ b/app/src/main/java/com/example/project_btl/cart/MainActivity_giohang.java	(date 1760577233473)
@@ -19,7 +19,7 @@
 import com.example.project_btl.Login.SignInactivity;
 import com.example.project_btl.home.MainHomeActivity;
 import com.example.project_btl.notification.NotificationsActivity;
-import com.example.project_btl.CheckOutActivity;
+import com.example.project_btl.CheckOut.CheckOutActivity;
 import com.google.android.material.bottomnavigation.BottomNavigationView;
 import com.google.firebase.auth.FirebaseAuth;
 import com.google.firebase.firestore.DocumentSnapshot;
Index: app/src/main/java/com/example/project_btl/CheckOutActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/project_btl/CheckOutActivity.java b/app/src/main/java/com/example/project_btl/CheckOut/CheckOutActivity.java
rename from app/src/main/java/com/example/project_btl/CheckOutActivity.java
rename to app/src/main/java/com/example/project_btl/CheckOut/CheckOutActivity.java
--- a/app/src/main/java/com/example/project_btl/CheckOutActivity.java	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ b/app/src/main/java/com/example/project_btl/CheckOut/CheckOutActivity.java	(date 1760577233556)
@@ -1,4 +1,4 @@
-package com.example.project_btl;
+package com.example.project_btl.CheckOut;
 
 import android.app.AlertDialog;
 import android.content.Intent;
@@ -17,10 +17,13 @@
 import androidx.recyclerview.widget.LinearLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
 
+import com.example.project_btl.CartManagerFirebase;
+import com.example.project_btl.OrderManagerFirebase;
+import com.example.project_btl.ProductModel;
+import com.example.project_btl.R;
 import com.example.project_btl.home.MainHomeActivity;
 import com.google.firebase.auth.FirebaseAuth;
 import com.google.firebase.auth.FirebaseUser;
-import com.google.firebase.firestore.DocumentReference;
 import com.google.firebase.firestore.FirebaseFirestore;
 
 import java.text.NumberFormat;
Index: app/src/main/java/com/example/project_btl/CheckoutAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/project_btl/CheckoutAdapter.java b/app/src/main/java/com/example/project_btl/CheckOut/CheckoutAdapter.java
rename from app/src/main/java/com/example/project_btl/CheckoutAdapter.java
rename to app/src/main/java/com/example/project_btl/CheckOut/CheckoutAdapter.java
--- a/app/src/main/java/com/example/project_btl/CheckoutAdapter.java	(revision 75842e5afd512b57860e843c000a8942bcbfdd08)
+++ b/app/src/main/java/com/example/project_btl/CheckOut/CheckoutAdapter.java	(date 1760577233548)
@@ -1,4 +1,4 @@
-package com.example.project_btl;
+package com.example.project_btl.CheckOut;
 
 import android.view.LayoutInflater;
 import android.view.View;
